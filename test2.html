<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Kreise im Raster mit Regler</title>
<style>
  .grid-container {
    display: grid;
    grid-template-columns: repeat(20, 30px);
    grid-template-rows: repeat(20, 30px);
    gap: 0;
  }
  .circle {
    width: 30px;
    height: 30px;
    background-color: gray;
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.5s;
  }
  #speedControl {
    margin: 20px 0;
  }
</style>
</head>
<body>

<div id="grid" class="grid-container"></div>
<input type="range" id="speedControl" min="1" max="100" value="50">

<script>
  const grid = document.getElementById('grid');
  let circles = [];

  function createCircles() {
    grid.innerHTML = ''; // Reset grid
    circles = []; // Reset circles array
    for (let i = 0; i < 400; i++) {
      const circle = document.createElement('div');
      circle.className = 'circle';
      circle.dataset.index = i + 1;
      grid.appendChild(circle);
      circles.push(circle);
    }
  }

  function startAnimation(speed) {
    let delay = 1000 / speed; // Start delay based on speed
    const minDelay = 100; // Minimum delay
    const maxDelay = 1000; // Maximum delay
    const step = (maxDelay - minDelay) / 200; // Step size for delay changes

    circles.forEach((circle, index) => {
      setTimeout(() => {
        circle.style.opacity = 1;
      }, delay);

      if (index < 200) {
        delay = Math.max(minDelay, delay - step);
      } else {
        delay = Math.min(maxDelay, delay + step);
      }
    });
  }

  // Initialize circles and start animation
  createCircles();
  startAnimation(50); // Start with medium speed

  // Speed control
  document.getElementById('speedControl').addEventListener('input', function() {
    startAnimation(this.value);
    createCircles(); // Recreate circles to restart the animation
  });
</script>

</body>
</html>