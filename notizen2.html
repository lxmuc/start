<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notizen 2a</title>
<link rel="apple-touch-icon" href="IMG_7936.ico">
<style>


  
  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    background-color: #f4f4f4; 
  }
  #headerText {
    font-family: Arial, sans-serif;
    font-size: 15px;
    font-weight: bold;
    color: darkgrey;
    margin: 30px 80px 0 80px; /* Align with the textarea */
  }
  #buttonContainer {
    display: flex;
    justify-content: flex-start;
    padding-left: 80px; /* Align with the textarea */
    margin-top: 30px;
  }
  button {
    margin-right: 10px; /* Spacing between buttons */
    font-size: 15px;
  }
  textarea {
    font-family: Arial, sans-serif;
    font-size: 15px;
    resize: none;
    border: none; /* No border */
    outline: none; /* No focus outline */
    margin: 30px 80px 0 80px; /* Margin as specified */
    flex-grow: 1;
    min-height: 400px; /* Minimum height */
  }
</style>
</head>
<body>

<div id="headerText">Notes</div>

<div id="buttonContainer">
  <button onclick="copyText()">Copy</button>
  <button onclick="pasteText()">Paste</button>
  <button onclick="clearText()">Löschen</button>
</div>

<textarea id="textArea" placeholder="Start typing..."></textarea>

<script>
  function saveContent() {
    try {
      localStorage.setItem('textData2', document.getElementById('textArea').value);
    } catch (e) {
      console.error("Could not save to localStorage. Details: ", e);
    }
  }

  function updateHeader() {
    var textAreaContent = document.getElementById('textArea').value;
    var firstLine = textAreaContent.split('\n')[0] || 'Notes';
    document.getElementById('headerText').innerText = firstLine;
  }

  function copyText() {
    navigator.clipboard.writeText(document.getElementById('textArea').value)
      .then(() => alert('Text copied to clipboard'))
      .catch(err => console.error('Failed to copy text: ', err));
  }

  function pasteText() {
    navigator.clipboard.readText()
      .then(text => {
        const currentContent = document.getElementById('textArea').value;
        document.getElementById('textArea').value = currentContent + "\n\n" + text;
        saveContent(); 
        updateHeader();
      })
      .catch(err => console.error('Failed to paste text: ', err));
  }

  function clearText() {
    if (window.confirm("Alter Text wird gelöscht. Sicher?")) {
      document.getElementById('textArea').value = '';
      saveContent(); 
      updateHeader();
    }
  }

  document.getElementById('textArea').addEventListener('input', function() {
    saveContent();
    updateHeader();
  });

  window.onload = function() {
    try {
      var savedContent = localStorage.getItem('textData2');
      if (savedContent) {
        document.getElementById('textArea').value = savedContent;
      }
      updateHeader();
    } catch (e) {
      console.error("Could not load from localStorage. Details: ", e);
    }
  };
</script>

</body>
</html>
